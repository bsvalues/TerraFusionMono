
CREATE PROCEDURE CreateNewMortComp
   @mort_id	int
AS

if not exists (select * from account where acct_id = @mort_id)
begin
	begin transaction
	insert into account(acct_id,acct_create_dt,comment,ref_id1,update_dt) values (@mort_id,GETDATE(),'Generated by SP CreateNewMortgage',@mort_id,GETDATE())
	insert into mortgage_co(mortgage_co_id,mortgage_cd) values (@mort_id,@mort_id)
	if @@ERROR = 0
	begin
		commit transaction
		print 'Mortgage acct ' + cast(@mort_id as varchar) + ' was successfully created'
	end
	else
	begin
		print 'Mortgage acct ' + cast(@mort_id as varchar) + ' WAS NOT SUCCESSFUL'
	end

end
else
begin
	print 'ACCOUNT ' + cast(@mort_id as varchar) + ' ALREADY EXISTS'
end

GO

