<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | PACS-Training Assistant</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="/static/css/styles.css" rel="stylesheet">
    <!-- Font Awesome Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <h1><i class="fas fa-chart-line me-2"></i>PACS-Training Dashboard</h1>
                    <p class="lead">Monitoring and analytics for your AI assistant</p>
                </div>
                <div class="col-md-4 text-end">
                    <a href="/" class="btn btn-outline-info">
                        <i class="fas fa-comments me-1"></i> Return to Chat
                    </a>
                </div>
            </div>
        </header>
        
        <!-- Main Content -->
        <main>
            <!-- Quick Stats Row -->
            <div class="row mb-4">
                <div class="col-md-3">
                    <div class="card bg-dark text-center">
                        <div class="card-body">
                            <h2 class="card-title text-info"><i class="fas fa-database"></i></h2>
                            <h5>Database Status</h5>
                            <span class="badge bg-success">Connected</span>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-dark text-center">
                        <div class="card-body">
                            <h2 class="card-title text-warning"><i class="fas fa-question-circle"></i></h2>
                            <h5>Total Queries</h5>
                            <p class="fs-4">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-dark text-center">
                        <div class="card-body">
                            <h2 class="card-title text-danger"><i class="fas fa-exclamation-triangle"></i></h2>
                            <h5>Errors</h5>
                            <p class="fs-4">0</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card bg-dark text-center">
                        <div class="card-body">
                            <h2 class="card-title text-success"><i class="fas fa-clock"></i></h2>
                            <h5>Avg Response Time</h5>
                            <p class="fs-4">0.0s</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <!-- Query Distribution Chart -->
                <div class="col-md-6">
                    <div class="card bg-dark mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-pie me-2"></i>Query Distribution</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="queryChart" height="250"></canvas>
                        </div>
                    </div>
                </div>
                
                <!-- Response Time Chart -->
                <div class="col-md-6">
                    <div class="card bg-dark mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-line me-2"></i>Response Times</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="responseTimeChart" height="250"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <!-- Recent Errors -->
                <div class="col-md-12">
                    <div class="card bg-dark mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-exclamation-circle me-2"></i>Recent Errors</h5>
                        </div>
                        <div class="card-body">
                            <p class="text-muted text-center py-4">No errors recorded</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <!-- System Information -->
                <div class="col-md-6">
                    <div class="card bg-dark mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-info-circle me-2"></i>System Information</h5>
                        </div>
                        <div class="card-body">
                            <table class="table table-dark">
                                <tbody>
                                    <tr>
                                        <td>Database</td>
                                        <td>SQL Server - pacs_training</td>
                                    </tr>
                                    <tr>
                                        <td>Authentication</td>
                                        <td>Windows Authentication</td>
                                    </tr>
                                    <tr>
                                        <td>Vector Store</td>
                                        <td>SQL Server (cama_vectors)</td>
                                    </tr>
                                    <tr>
                                        <td>LLM Model</td>
                                        <td>OpenAI GPT</td>
                                    </tr>
                                    <tr>
                                        <td>Metrics</td>
                                        <td>http://localhost:8001/metrics</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Resources -->
                <div class="col-md-6">
                    <div class="card bg-dark mb-4">
                        <div class="card-header">
                            <h5><i class="fas fa-link me-2"></i>Resources</h5>
                        </div>
                        <div class="card-body">
                            <div class="list-group">
                                <a href="http://localhost:8001/metrics" class="list-group-item list-group-item-action bg-dark">
                                    <i class="fas fa-chart-bar me-2"></i>Prometheus Metrics
                                </a>
                                <a href="#" class="list-group-item list-group-item-action bg-dark">
                                    <i class="fas fa-file-alt me-2"></i>View Logs
                                </a>
                                <a href="#" class="list-group-item list-group-item-action bg-dark">
                                    <i class="fas fa-book me-2"></i>Documentation
                                </a>
                                <a href="#" class="list-group-item list-group-item-action bg-dark">
                                    <i class="fas fa-cog me-2"></i>Configuration
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="footer">
            <p>PACS-Training Assistant &copy; 2023 | Powered by LangChain + SQL Server</p>
        </footer>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Dashboard Charts -->
    <script>
        // Sample data for charts - would be replaced with real data in production
        document.addEventListener('DOMContentLoaded', () => {
            // Query Distribution Chart
            const queryCtx = document.getElementById('queryChart').getContext('2d');
            const queryChart = new Chart(queryCtx, {
                type: 'pie',
                data: {
                    labels: ['General', 'Document Search', 'Levy Calc', 'Trends', 'DBA'],
                    datasets: [{
                        data: [20, 10, 15, 5, 8],
                        backgroundColor: [
                            '#0d6efd', '#6c757d', '#ffc107', '#198754', '#dc3545'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
            
            // Response Time Chart
            const timeCtx = document.getElementById('responseTimeChart').getContext('2d');
            const timeChart = new Chart(timeCtx, {
                type: 'line',
                data: {
                    labels: ['1h ago', '50m ago', '40m ago', '30m ago', '20m ago', '10m ago', 'Now'],
                    datasets: [{
                        label: 'Response Time (s)',
                        data: [1.2, 0.8, 2.5, 1.7, 0.9, 1.5, 1.1],
                        borderColor: '#0dcaf0',
                        backgroundColor: 'rgba(13, 202, 240, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
